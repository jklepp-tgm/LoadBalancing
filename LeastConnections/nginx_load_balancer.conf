worker_processes  99;
events {    
    worker_connections  1024;
}
http {
  upstream balancer{
    least_conn;
    server 127.0.0.1:8001;
    server 127.0.0.1:8002;
    server 127.0.0.1:8003;
    server 127.0.0.1:8004;
  } 
    
  server { 
    listen 8000;
    server_name balancer.least_conn;
    location / {
      proxy_pass http://balancer;
    }
  } 
}
